{"version":3,"file":"operations.js","sourceRoot":"","sources":["../../../../src/api/vectorStoreFileBatches/operations.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { AgentsContext as Client } from \"../index.js\";\nimport {\n  vectorStoreDataSourceArraySerializer,\n  vectorStoreChunkingStrategyRequestUnionSerializer,\n  _AgentsPagedResultVectorStoreFile,\n  _agentsPagedResultVectorStoreFileDeserializer,\n  VectorStoreFileBatch,\n  vectorStoreFileBatchDeserializer,\n} from \"../../models/models.js\";\nimport {\n  VectorStoreFileBatchesListVectorStoreFileBatchFilesOptionalParams,\n  VectorStoreFileBatchesCancelVectorStoreFileBatchOptionalParams,\n  VectorStoreFileBatchesGetVectorStoreFileBatchOptionalParams,\n  VectorStoreFileBatchesCreateVectorStoreFileBatchOptionalParams,\n} from \"./options.js\";\nimport {\n  PagedAsyncIterableIterator,\n  buildPagedAsyncIterator,\n} from \"../../static-helpers/pagingHelpers.js\";\nimport { expandUrlTemplate } from \"../../static-helpers/urlTemplate.js\";\nimport {\n  StreamableMethod,\n  PathUncheckedResponse,\n  createRestError,\n  operationOptionsToRequestParameters,\n} from \"@azure-rest/core-client\";\nimport { OperationState, OperationStatus, PollerLike } from \"@azure/core-lro\";\nimport { createPoller } from \"../poller.js\";\n\nexport function _listVectorStoreFileBatchFilesSend(\n  context: Client,\n  vectorStoreId: string,\n  batchId: string,\n  options: VectorStoreFileBatchesListVectorStoreFileBatchFilesOptionalParams = {\n    requestOptions: {},\n  },\n): StreamableMethod {\n  return context\n    .path(\"/vector_stores/{vectorStoreId}/file_batches/{batchId}/files\", vectorStoreId, batchId)\n    .get({\n      ...operationOptionsToRequestParameters(options),\n      headers: {\n        accept: \"application/json\",\n        ...options.requestOptions?.headers,\n      },\n    });\n}\n\nexport async function _listVectorStoreFileBatchFilesDeserialize(\n  result: PathUncheckedResponse,\n): Promise<_AgentsPagedResultVectorStoreFile> {\n  const expectedStatuses = [\"200\"];\n  if (!expectedStatuses.includes(result.status)) {\n    throw createRestError(result);\n  }\n\n  return _agentsPagedResultVectorStoreFileDeserializer(result.body);\n}\n\n/** Returns a list of vector store files in a batch. */\nexport function listVectorStoreFileBatchFiles(\n  context: Client,\n  vectorStoreId: string,\n  batchId: string,\n  options: VectorStoreFileBatchesListVectorStoreFileBatchFilesOptionalParams = {\n    requestOptions: {},\n  },\n): PagedAsyncIterableIterator<VectorStoreFileBatch> {\n  return buildPagedAsyncIterator(\n    context,\n    () => _listVectorStoreFileBatchFilesSend(context, vectorStoreId, batchId, options),\n    _listVectorStoreFileBatchFilesDeserialize,\n    [\"200\"],\n    { itemName: \"data\" },\n  );\n}\n\nexport function _cancelVectorStoreFileBatchSend(\n  context: Client,\n  vectorStoreId: string,\n  batchId: string,\n  options: VectorStoreFileBatchesCancelVectorStoreFileBatchOptionalParams = {\n    requestOptions: {},\n  },\n): StreamableMethod {\n  const path = expandUrlTemplate(\n    \"/vector_stores/{vectorStoreId}/file_batches/{batchId}/cancel{?api%2Dversion}\",\n    {\n      vectorStoreId: vectorStoreId,\n      batchId: batchId,\n      \"api%2Dversion\": context.apiVersion,\n    },\n    {\n      allowReserved: options?.requestOptions?.skipUrlEncoding,\n    },\n  );\n  return context.path(path).post({\n    ...operationOptionsToRequestParameters(options),\n    headers: {\n      accept: \"application/json\",\n      ...options.requestOptions?.headers,\n    },\n  });\n}\n\nexport async function _cancelVectorStoreFileBatchDeserialize(\n  result: PathUncheckedResponse,\n): Promise<VectorStoreFileBatch> {\n  const expectedStatuses = [\"200\"];\n  if (!expectedStatuses.includes(result.status)) {\n    throw createRestError(result);\n  }\n\n  return vectorStoreFileBatchDeserializer(result.body);\n}\n\n/** Cancel a vector store file batch. This attempts to cancel the processing of files in this batch as soon as possible. */\nexport async function cancelVectorStoreFileBatch(\n  context: Client,\n  vectorStoreId: string,\n  batchId: string,\n  options: VectorStoreFileBatchesCancelVectorStoreFileBatchOptionalParams = {\n    requestOptions: {},\n  },\n): Promise<VectorStoreFileBatch> {\n  const result = await _cancelVectorStoreFileBatchSend(context, vectorStoreId, batchId, options);\n  return _cancelVectorStoreFileBatchDeserialize(result);\n}\n\nexport function _getVectorStoreFileBatchSend(\n  context: Client,\n  vectorStoreId: string,\n  batchId: string,\n  options: VectorStoreFileBatchesGetVectorStoreFileBatchOptionalParams = {\n    requestOptions: {},\n  },\n): StreamableMethod {\n  const path = expandUrlTemplate(\n    \"/vector_stores/{vectorStoreId}/file_batches/{batchId}{?api%2Dversion}\",\n    {\n      vectorStoreId: vectorStoreId,\n      batchId: batchId,\n      \"api%2Dversion\": context.apiVersion,\n    },\n    {\n      allowReserved: options?.requestOptions?.skipUrlEncoding,\n    },\n  );\n  return context.path(path).get({\n    ...operationOptionsToRequestParameters(options),\n    headers: {\n      accept: \"application/json\",\n      ...options.requestOptions?.headers,\n    },\n  });\n}\n\nexport async function _getVectorStoreFileBatchDeserialize(\n  result: PathUncheckedResponse,\n): Promise<VectorStoreFileBatch> {\n  const expectedStatuses = [\"200\"];\n  if (!expectedStatuses.includes(result.status)) {\n    throw createRestError(result);\n  }\n\n  return vectorStoreFileBatchDeserializer(result.body);\n}\n\n/** Retrieve a vector store file batch. */\nexport async function getVectorStoreFileBatch(\n  context: Client,\n  vectorStoreId: string,\n  batchId: string,\n  options: VectorStoreFileBatchesGetVectorStoreFileBatchOptionalParams = {\n    requestOptions: {},\n  },\n): Promise<VectorStoreFileBatch> {\n  const result = await _getVectorStoreFileBatchSend(context, vectorStoreId, batchId, options);\n  return _getVectorStoreFileBatchDeserialize(result);\n}\n\nexport function _createVectorStoreFileBatchSend(\n  context: Client,\n  vectorStoreId: string,\n  options: VectorStoreFileBatchesCreateVectorStoreFileBatchOptionalParams = {\n    requestOptions: {},\n  },\n): StreamableMethod {\n  const path = expandUrlTemplate(\n    \"/vector_stores/{vectorStoreId}/file_batches{?api%2Dversion}\",\n    {\n      vectorStoreId: vectorStoreId,\n      \"api%2Dversion\": context.apiVersion,\n    },\n    {\n      allowReserved: options?.requestOptions?.skipUrlEncoding,\n    },\n  );\n  return context.path(path).post({\n    ...operationOptionsToRequestParameters(options),\n    contentType: \"application/json\",\n    headers: { accept: \"application/json\", ...options.requestOptions?.headers },\n    body: {\n      file_ids: !options?.fileIds\n        ? options?.fileIds\n        : options?.fileIds.map((p: any) => {\n            return p;\n          }),\n      data_sources: !options?.dataSources\n        ? options?.dataSources\n        : vectorStoreDataSourceArraySerializer(options?.dataSources),\n      chunking_strategy: !options?.chunkingStrategy\n        ? options?.chunkingStrategy\n        : vectorStoreChunkingStrategyRequestUnionSerializer(options?.chunkingStrategy),\n    },\n  });\n}\n\nexport async function _createVectorStoreFileBatchDeserialize(\n  result: PathUncheckedResponse,\n): Promise<VectorStoreFileBatch> {\n  const expectedStatuses = [\"200\"];\n  if (!expectedStatuses.includes(result.status)) {\n    throw createRestError(result);\n  }\n\n  return vectorStoreFileBatchDeserializer(result.body);\n}\n\n/** Create a vector store file batch. */\nexport async function createVectorStoreFileBatchInternal(\n  context: Client,\n  vectorStoreId: string,\n  options: VectorStoreFileBatchesCreateVectorStoreFileBatchOptionalParams = {\n    requestOptions: {},\n  },\n): Promise<VectorStoreFileBatch> {\n  const result = await _createVectorStoreFileBatchSend(context, vectorStoreId, options);\n  return _createVectorStoreFileBatchDeserialize(result);\n}\n/** Create a vector store file batch. */\nexport function createVectorStoreFileBatch(\n  context: Client,\n  vectorStoreId: string,\n  options: VectorStoreFileBatchesCreateVectorStoreFileBatchOptionalParams = { requestOptions: {} },\n): PollerLike<OperationState<VectorStoreFileBatch>, VectorStoreFileBatch> {\n  return createPoller<VectorStoreFileBatch>({\n    initOperation: async () => {\n      return createVectorStoreFileBatchInternal(context, vectorStoreId, options);\n    },\n    pollOperation: async (currentResult: VectorStoreFileBatch) => {\n      return getVectorStoreFileBatch(context, vectorStoreId, currentResult.id, options);\n    },\n    getOperationStatus: getLroOperationStatus,\n    intervalInMs: options.pollingOptions?.intervalInMs,\n  });\n}\n\n/** Create a vector store file batch and poll. */\nexport function createVectorStoreFileBatchAndPoll(\n  context: Client,\n  vectorStoreId: string,\n  options: VectorStoreFileBatchesCreateVectorStoreFileBatchOptionalParams = { requestOptions: {} },\n): PollerLike<OperationState<VectorStoreFileBatch>, VectorStoreFileBatch> {\n  return createPoller<VectorStoreFileBatch>({\n    initOperation: async () => {\n      return createVectorStoreFileBatchInternal(context, vectorStoreId, options);\n    },\n    pollOperation: async (currentResult: VectorStoreFileBatch) => {\n      return getVectorStoreFileBatch(context, vectorStoreId, currentResult.id, options);\n    },\n    getOperationStatus: getLroOperationStatus,\n    intervalInMs: options.pollingOptions?.intervalInMs,\n  });\n}\n\nfunction getLroOperationStatus(result: VectorStoreFileBatch): OperationStatus {\n  switch (result.status) {\n    case \"in_progress\":\n      return \"running\";\n    case \"completed\":\n      return \"succeeded\";\n    case \"cancelled\":\n      return \"canceled\";\n    default:\n      return \"failed\";\n  }\n}\n"]}